<?xml version="1.0"?>
<!--
  ~ $Id$
  ~ $Revision$
  ~ $Date$
  ~ $Author$
  ~
  ~ The DOMS project.
  ~ Copyright (C) 2007-2010  The State and University Library
  ~
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
  -->

<project default="qa-report" name="qa-report" basedir=".">

    <property file="build.properties"/>

    <property name="report.html" value="${user.home}/public_html/qa/report.html"/>

    <!-- ADD NEW MODULES TO THE CLASSPATH HERE.
         YOU MUST ALSO ADD TO THE INSPECTED MODULES
         IN THE BOTTOM OF THIS FILE -->
    <path id="path.all">
        <fileset dir="${basedir}">
            <include name="lib/*.jar"/>
        </fileset>
    </path>
	
	<target name="qa-report">
	    <java fork="true"
    	      classname="dk.statsbiblioteket.util.qa.PackageScannerDriver"
    	      output="${report.html}"
              classpathref="path.all"
              dir="${basedir}/..">

            <!-- Link to ViewVC server -->
            <arg value="-s"/>
            <arg value="http://merkur/viewvc/trunk/@MODULE@/src/@FILE@?root=doms&amp;view=log"/>

            <!-- Set project name -->
            <arg value="-n"/>
            <arg value="SB DOMS"/>

            <!-- Only scan packages in dk.statsbiblioteket name space -->
            <arg value="-p"/>
            <arg value="dk.statsbiblioteket"/>

            <arg value="ingest/${classes.dir}"/>
            <!-- ADD NEW MODULES HERE. YOU MUST ALSO ADD TO THE CLASSPATH
                 IN THE TOP OF THIS FILE -->

        </java>
	</target>
	
    <target name="release" depends="qa-report"/>
</project>
